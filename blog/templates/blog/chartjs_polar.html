<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chart.js Polar Area 예제</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin: 24px; }
        .container { max-width: 720px; margin: 0 auto; }
        canvas { max-width: 100%; }
        .controls { margin: 12px 0; }
        button { padding: 6px 12px; }
        a { color: #2563eb; text-decoration: none; }
    </style>
</head>
<body>
<div class="container">
    <h1>Chart.js Polar Area 차트</h1>
    <p><a href="/">홈</a> · <a href="{% url 'chart_page' %}">Plotly 혼합 차트</a></p>
    <div class="controls">
        <button id="shuffle">데이터 셔플</button>
        <button id="randomize">랜덤 값</button>
    </div>
    <canvas id="polarChart" width="600" height="600"></canvas>
</div>

<script>
// 기본 데이터
const labels = ['Red', 'Green', 'Yellow', 'Grey', 'Blue'];
let dataValues = [11, 16, 7, 3, 14];

const backgroundColors = [
  'rgba(239, 68, 68, 0.6)',  // red
  'rgba(34, 197, 94, 0.6)',  // green
  'rgba(250, 204, 21, 0.6)', // yellow
  'rgba(107, 114, 128, 0.6)',// grey
  'rgba(59, 130, 246, 0.6)', // blue
];

const ctx = document.getElementById('polarChart');
const chart = new Chart(ctx, {
  type: 'polarArea',
  data: {
    labels,
    datasets: [{
      label: 'Traffic Share',
      data: dataValues,
      backgroundColor: backgroundColors,
      borderColor: 'rgba(255, 255, 255, 0.9)',
      borderWidth: 1,
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { position: 'top' },
      title: { display: true, text: 'Polar Area (Chart.js v4)' }
    },
    scales: {
      r: {
        suggestedMin: 0,
        ticks: { backdropColor: 'transparent' }
      }
    },
    animation: { duration: 600 }
  }
});

// 유틸
function shuffle(array) {
  const arr = array.slice();
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

document.getElementById('shuffle').addEventListener('click', () => {
  chart.data.labels = shuffle(chart.data.labels);
  chart.update();
});

document.getElementById('randomize').addEventListener('click', () => {
  chart.data.datasets[0].data = chart.data.datasets[0].data.map(() => Math.floor(Math.random() * 20) + 1);
  chart.update();
});
</script>
</body>
</html>


